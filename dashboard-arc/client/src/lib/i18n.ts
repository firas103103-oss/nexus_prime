import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';

const resources = {
  en: {
    translation: {
      common: {
        online: 'Online',
        offline: 'Offline',
        secure: 'Secure',
        connected: 'Connected',
        disconnected: 'Disconnected',
        connecting: 'Connecting',
        reconnecting: 'Reconnecting',
        error: 'Error',
        save: 'Save',
        cancel: 'Cancel',
        delete: 'Delete',
        edit: 'Edit',
        add: 'Add',
        search: 'Search',
        loading: 'Loading...',
        noData: 'No data available',
        success: 'Success',
        warning: 'Warning',
        info: 'Info',
        close: 'Close',
        submit: 'Submit',
        reset: 'Reset',
        download: 'Download',
        upload: 'Upload',
        send: 'Send',
        systemOnline: 'System Online',
        commandCenter: 'Command Center',
      },
      nav: {
        home: 'Home',
        dashboard: 'Dashboard',
        commandLogs: 'Command Logs',
        systemMonitor: 'System Monitor',
        teamCommand: 'Team Command',
        operationsSimulator: 'Operations Simulator',
        analyticsHub: 'Analytics Hub',
        systemArchitecture: 'System Architecture',
        voiceChat: 'Voice Chat',
        voiceSelector: 'Voice Selector',
        agentVoices: 'Agent Voices',
        investigationLounge: 'Investigation Lounge',
        quantumWarroom: 'Quantum WarRoom',
        temporalAnomalyLab: 'Temporal Anomaly Lab',
        selfCheck: 'Self Check',
        metrics: 'Metrics',
        bioSentinel: 'X Bio Sentinel',
        adminPanel: 'Admin Control Panel',
        masterAgent: 'Master Agent Command',
        growthRoadmap: 'Growth Roadmap',
        administration: 'Administration',
        operations: 'Operations',
        communications: 'Communications',
        intelligence: 'Intelligence',
        logout: 'Logout',
      },
      landing: {
        title: 'ARC Intelligence',
        subtitle: 'Command Center',
        description: 'Enterprise-grade AI orchestration platform. Deploy, monitor, and coordinate specialized AI agents across your organization with real-time threat intelligence and operational awareness.',
        enterCommandCenter: 'Enter Command Center',
        viewCapabilities: 'View Capabilities',
        cyberDefenseCommand: 'Cyber Defense Command',
        accessPortal: 'Access Portal',
        multiAgentFramework: 'Multi-Agent Intelligence Framework v2.0',
        operationalCapabilities: 'Operational Capabilities',
        missionCriticalFeatures: 'Mission-critical features for enterprise AI coordination',
        multiAgentFleet: 'Multi-Agent Fleet',
        multiAgentFleetDesc: 'Deploy specialized AI agents for operations, communications, intelligence, and executive functions',
        realTimeMonitoring: 'Real-Time Monitoring',
        realTimeMonitoringDesc: 'Live system telemetry, performance metrics, and operational status across all deployed agents',
        secureOperations: 'Secure Operations',
        secureOperationsDesc: 'Enterprise-grade security with encrypted communications and role-based access control',
        threatIntelligence: 'Threat Intelligence',
        threatIntelligenceDesc: 'Continuous threat assessment and vulnerability monitoring across your digital infrastructure',
        voiceInterface: 'Voice Interface',
        voiceInterfaceDesc: 'Natural language voice commands for hands-free agent coordination and system control',
        analyticsReporting: 'Analytics & Reporting',
        analyticsReportingDesc: 'Comprehensive dashboards and automated reporting for operational insights',
        androidApp: 'Android App',
        androidAppDesc: 'Download the Android project to build and install the ARC Intelligence app on your mobile device.',
        errors: {
          invalidKey: 'Invalid security key',
          authFailed: 'Authentication failed. Please try again.',
          connectionError: 'Connection error. Please check your network.',
        },
      },
      header: {
        arcCommandCenter: 'ARC Command Center',
        arcIntelligence: 'ARC INTELLIGENCE',
      },
      dashboard: {
        title: 'Dashboard',
        subtitle: 'Monitor system health and agent activity',
        systemStatus: 'System Status',
        activeAgents: 'Active Agents',
        pendingTasks: 'Pending Tasks',
        threatLevel: 'Threat Level',
        recentActivity: 'Recent Activity',
        agentStatus: 'Agent Status',
      },
      bioSentinel: {
        title: 'X Bio Sentinel',
        subtitle: 'Advanced biometric monitoring and environmental sensing',
        connectionStatus: 'Connection Status',
        sensorReadings: 'Sensor Readings',
        deviceControl: 'Device Control',
        smellProfiles: 'Smell Profiles',
        aiAssistant: 'AI Assistant',
        gasResistance: 'Gas Resistance',
        temperature: 'Temperature',
        humidity: 'Humidity',
        pressure: 'Pressure',
        iaqScore: 'IAQ Score',
        iaqAccuracy: 'IAQ Accuracy',
        co2Equivalent: 'CO2 Equivalent',
        vocEquivalent: 'VOC Equivalent',
        heaterTemperature: 'Heater Temperature',
        heaterDuration: 'Heater Duration',
        startCapture: 'Start Capture',
        stopCapture: 'Stop Capture',
        calibrate: 'Calibrate',
        captureProgress: 'Capture Progress',
        samplesCollected: 'Samples Collected',
        heaterProfile: 'Heater Profile',
        lowPower: 'Low Power',
        balanced: 'Balanced',
        highSensitivity: 'High Sensitivity',
        rapid: 'Rapid',
        batterySavingMode: 'Battery saving mode',
        generalUse: 'General use',
        bestVocDetection: 'Best VOC detection',
        fastResponse: 'Fast response',
        profileName: 'Profile Name',
        category: 'Category',
        tags: 'Tags',
        createProfile: 'Create Profile',
        matchProfile: 'Match Profile',
        noProfiles: 'No smell profiles created yet',
        deviceId: 'Device ID',
        firmwareVersion: 'Firmware Version',
        uptime: 'Uptime',
        wifiSignal: 'WiFi Signal',
        freeMemory: 'Free Memory',
        lastCalibration: 'Last Calibration',
        chatPlaceholder: 'Ask about sensor readings...',
        excellent: 'Excellent',
        good: 'Good',
        moderate: 'Moderate',
        poor: 'Poor',
        unhealthy: 'Unhealthy',
        hazardous: 'Hazardous',
        liveData: 'Live Data',
        history: 'History',
        mode: 'Mode',
        idle: 'Idle',
        monitoring: 'Monitoring',
        calibrating: 'Calibrating',
        capturing: 'Capturing',
      },
      teamCommand: {
        title: 'Team Command Center',
        subtitle: 'Coordinate team operations and assignments',
      },
      analytics: {
        title: 'Analytics Hub',
        subtitle: 'Performance metrics and operational insights',
      },
      operations: {
        title: 'Operations Simulator',
        subtitle: 'Test and simulate operational scenarios',
      },
      voiceChat: {
        title: 'Voice Chat',
        subtitle: 'Real-time voice communication with ARC agents',
      },
      selfCheck: {
        title: 'Self Check',
        subtitle: 'System diagnostics and health verification',
      },
      metrics: {
        title: 'Metrics',
        subtitle: 'Command performance analytics',
      },
      systemMonitor: {
        title: 'System Monitor',
        subtitle: 'Monitor system health and reflex events',
      },
    },
  },
  ar: {
    translation: {
      common: {
        online: 'متصل',
        offline: 'غير متصل',
        secure: 'آمن',
        connected: 'متصل',
        disconnected: 'غير متصل',
        connecting: 'جاري الاتصال',
        reconnecting: 'إعادة الاتصال',
        error: 'خطأ',
        save: 'حفظ',
        cancel: 'إلغاء',
        delete: 'حذف',
        edit: 'تعديل',
        add: 'إضافة',
        search: 'بحث',
        loading: 'جاري التحميل...',
        noData: 'لا توجد بيانات',
        success: 'نجاح',
        warning: 'تحذير',
        info: 'معلومات',
        close: 'إغلاق',
        submit: 'إرسال',
        reset: 'إعادة تعيين',
        download: 'تحميل',
        upload: 'رفع',
        send: 'إرسال',
        systemOnline: 'النظام متصل',
        commandCenter: 'مركز القيادة',
      },
      nav: {
        home: 'الرئيسية',
        dashboard: 'لوحة التحكم',
        commandLogs: 'سجلات الأوامر',
        systemMonitor: 'مراقبة النظام',
        teamCommand: 'قيادة الفريق',
        operationsSimulator: 'محاكي العمليات',
        analyticsHub: 'مركز التحليلات',
        systemArchitecture: 'هيكل النظام',
        voiceChat: 'المحادثة الصوتية',
        voiceSelector: 'محدد الصوت',
        agentVoices: 'أصوات الوكلاء',
        investigationLounge: 'غرفة التحقيق',
        quantumWarroom: 'غرفة الحرب الكمية',
        temporalAnomalyLab: 'مختبر الشذوذ الزمني',
        selfCheck: 'الفحص الذاتي',
        metrics: 'المقاييس',
        bioSentinel: 'إكس بايو سنتينل',
        adminPanel: 'لوحة التحكم الإدارية',
        masterAgent: 'وكيل التحكم الرئيسي',
        growthRoadmap: 'خارطة النمو 90 يوم',
        administration: 'الإدارة',
        operations: 'العمليات',
        communications: 'الاتصالات',
        intelligence: 'الاستخبارات',
        logout: 'تسجيل الخروج',
      },
      landing: {
        title: 'منظومة ARC الذكية',
        subtitle: 'مركز القيادة',
        description: 'منصة تنسيق الذكاء الاصطناعي على مستوى المؤسسات. انشر وراقب ونسق وكلاء الذكاء الاصطناعي المتخصصين عبر مؤسستك مع معلومات التهديدات في الوقت الفعلي والوعي التشغيلي.',
        enterCommandCenter: 'دخول مركز القيادة',
        viewCapabilities: 'عرض القدرات',
        cyberDefenseCommand: 'قيادة الدفاع السيبراني',
        accessPortal: 'بوابة الوصول',
        multiAgentFramework: 'إطار الذكاء متعدد الوكلاء الإصدار 2.0',
        operationalCapabilities: 'القدرات التشغيلية',
        missionCriticalFeatures: 'ميزات حرجة للمهام لتنسيق الذكاء الاصطناعي المؤسسي',
        multiAgentFleet: 'أسطول متعدد الوكلاء',
        multiAgentFleetDesc: 'انشر وكلاء ذكاء اصطناعي متخصصين للعمليات والاتصالات والاستخبارات والوظائف التنفيذية',
        realTimeMonitoring: 'المراقبة في الوقت الفعلي',
        realTimeMonitoringDesc: 'قياس النظام المباشر ومقاييس الأداء والحالة التشغيلية عبر جميع الوكلاء المنشورين',
        secureOperations: 'العمليات الآمنة',
        secureOperationsDesc: 'أمان على مستوى المؤسسات مع اتصالات مشفرة والتحكم في الوصول المستند إلى الأدوار',
        threatIntelligence: 'استخبارات التهديدات',
        threatIntelligenceDesc: 'تقييم مستمر للتهديدات ومراقبة الثغرات عبر بنيتك التحتية الرقمية',
        voiceInterface: 'واجهة الصوت',
        voiceInterfaceDesc: 'أوامر صوتية بلغة طبيعية لتنسيق الوكلاء والتحكم في النظام بدون استخدام اليدين',
        analyticsReporting: 'التحليلات والتقارير',
        analyticsReportingDesc: 'لوحات تحكم شاملة وتقارير آلية للرؤى التشغيلية',
        androidApp: 'تطبيق أندرويد',
        androidAppDesc: 'قم بتحميل مشروع أندرويد لبناء وتثبيت تطبيق ARC Intelligence على جهازك المحمول.',
        errors: {
          invalidKey: 'مفتاح الأمان غير صحيح',
          authFailed: 'فشلت المصادقة. الرجاء المحاولة مرة أخرى.',
          connectionError: 'خطأ في الاتصال. الرجاء التحقق من شبكتك.',
        },
      },
      header: {
        arcCommandCenter: 'مركز قيادة ARC',
        arcIntelligence: 'منظومة ARC الذكية',
      },
      dashboard: {
        title: 'لوحة التحكم',
        subtitle: 'مراقبة صحة النظام ونشاط الوكلاء',
        systemStatus: 'حالة النظام',
        activeAgents: 'الوكلاء النشطون',
        pendingTasks: 'المهام المعلقة',
        threatLevel: 'مستوى التهديد',
        recentActivity: 'النشاط الأخير',
        agentStatus: 'حالة الوكيل',
      },
      bioSentinel: {
        title: 'إكس بايو سنتينل',
        subtitle: 'مراقبة بيومترية متقدمة واستشعار بيئي',
        connectionStatus: 'حالة الاتصال',
        sensorReadings: 'قراءات المستشعر',
        deviceControl: 'التحكم بالجهاز',
        smellProfiles: 'ملفات الروائح',
        aiAssistant: 'مساعد الذكاء الاصطناعي',
        gasResistance: 'مقاومة الغاز',
        temperature: 'درجة الحرارة',
        humidity: 'الرطوبة',
        pressure: 'الضغط',
        iaqScore: 'مؤشر جودة الهواء',
        iaqAccuracy: 'دقة جودة الهواء',
        co2Equivalent: 'معادل ثاني أكسيد الكربون',
        vocEquivalent: 'معادل المركبات العضوية المتطايرة',
        heaterTemperature: 'درجة حرارة السخان',
        heaterDuration: 'مدة التسخين',
        startCapture: 'بدء الالتقاط',
        stopCapture: 'إيقاف الالتقاط',
        calibrate: 'معايرة',
        captureProgress: 'تقدم الالتقاط',
        samplesCollected: 'العينات المجمعة',
        heaterProfile: 'ملف السخان',
        lowPower: 'طاقة منخفضة',
        balanced: 'متوازن',
        highSensitivity: 'حساسية عالية',
        rapid: 'سريع',
        batterySavingMode: 'وضع توفير البطارية',
        generalUse: 'استخدام عام',
        bestVocDetection: 'أفضل كشف للمركبات العضوية',
        fastResponse: 'استجابة سريعة',
        profileName: 'اسم الملف',
        category: 'الفئة',
        tags: 'الوسوم',
        createProfile: 'إنشاء ملف',
        matchProfile: 'مطابقة الملف',
        noProfiles: 'لم يتم إنشاء ملفات روائح بعد',
        deviceId: 'معرف الجهاز',
        firmwareVersion: 'إصدار البرنامج الثابت',
        uptime: 'وقت التشغيل',
        wifiSignal: 'إشارة الواي فاي',
        freeMemory: 'الذاكرة المتاحة',
        lastCalibration: 'آخر معايرة',
        chatPlaceholder: 'اسأل عن قراءات المستشعر...',
        excellent: 'ممتاز',
        good: 'جيد',
        moderate: 'معتدل',
        poor: 'سيئ',
        unhealthy: 'غير صحي',
        hazardous: 'خطير',
        liveData: 'بيانات مباشرة',
        history: 'السجل',
        mode: 'الوضع',
        idle: 'خامل',
        monitoring: 'مراقبة',
        calibrating: 'معايرة',
        capturing: 'التقاط',
      },
      teamCommand: {
        title: 'مركز قيادة الفريق',
        subtitle: 'تنسيق عمليات الفريق والمهام',
      },
      analytics: {
        title: 'مركز التحليلات',
        subtitle: 'مقاييس الأداء والرؤى التشغيلية',
      },
      operations: {
        title: 'محاكي العمليات',
        subtitle: 'اختبار ومحاكاة سيناريوهات التشغيل',
      },
      voiceChat: {
        title: 'المحادثة الصوتية',
        subtitle: 'التواصل الصوتي في الوقت الفعلي مع وكلاء ARC',
      },
      selfCheck: {
        title: 'الفحص الذاتي',
        subtitle: 'تشخيصات النظام والتحقق من الصحة',
      },
      metrics: {
        title: 'المقاييس',
        subtitle: 'تحليلات أداء الأوامر',
      },
      systemMonitor: {
        title: 'مراقبة النظام',
        subtitle: 'مراقبة صحة النظام وأحداث الانعكاس',
      },
    },
  },
};

i18n
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    resources,
    fallbackLng: 'en',
    debug: false,
    interpolation: {
      escapeValue: false,
    },
    detection: {
      order: ['localStorage', 'navigator', 'htmlTag'],
      caches: ['localStorage'],
      lookupLocalStorage: 'arc-language',
    },
  });

export function updateDocumentDirection(lng: string) {
  const dir = lng === 'ar' ? 'rtl' : 'ltr';
  document.documentElement.dir = dir;
  document.documentElement.lang = lng;
  
  if (lng === 'ar') {
    document.documentElement.classList.add('rtl');
  } else {
    document.documentElement.classList.remove('rtl');
  }
}

i18n.on('languageChanged', (lng) => {
  updateDocumentDirection(lng);
  localStorage.setItem('arc-language', lng);
});

i18n.on('initialized', () => {
  updateDocumentDirection(i18n.language);
});

if (i18n.isInitialized) {
  updateDocumentDirection(i18n.language);
} else {
  const savedLang = localStorage.getItem('arc-language');
  if (savedLang) {
    updateDocumentDirection(savedLang);
  }
}

export default i18n;
