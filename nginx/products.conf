# ═══════════════════════════════════════════════════════════════
# NEXUS PRIME - Nginx Configuration for Products
# ═══════════════════════════════════════════════════════════════
# Main Domain: nexusprime.io (example)
# Products Subdomains
# ═══════════════════════════════════════════════════════════════

# Main Landing Page
server {
    listen 80;
    listen [::]:80;
    server_name nexusprime.io www.nexusprime.io;

    root /root/NEXUS_PRIME_UNIFIED/landing-pages;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    # Security headers
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;

    # Gzip compression
    gzip on;
    gzip_vary on;
    gzip_types text/plain text/css text/xml text/javascript application/x-javascript application/xml+rss application/json;
}

# Product 1: MRF103 Mobile App
server {
    listen 80;
    listen [::]:80;
    server_name mobile.nexusprime.io;

    root /root/products/mrf103-mobile;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    # API proxy if needed
    location /api {
        proxy_pass http://localhost:8001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}

# Product 2: JARVIS Control Hub
server {
    listen 80;
    listen [::]:80;
    server_name hub.nexusprime.io control.nexusprime.io;

    root /root/products/jarvis-control-hub;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    location /api {
        proxy_pass http://localhost:8002;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}

# Product 3: AlSultan Intelligence
server {
    listen 80;
    listen [::]:80;
    server_name ai.nexusprime.io intelligence.nexusprime.io;

    root /root/products/alsultan-intelligence;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    location /api {
        proxy_pass http://localhost:8003;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}

# Product 4: Imperial UI
server {
    listen 80;
    listen [::]:80;
    server_name imperial.nexusprime.io ui.nexusprime.io;

    root /root/products/imperial-ui;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    location /api {
        proxy_pass http://localhost:8004;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}

# Product 5: NEXUS Data Core
server {
    listen 80;
    listen [::]:80;
    server_name data.nexusprime.io core.nexusprime.io;

    location / {
        proxy_pass http://localhost:8005;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}

# Product 6: X-BIO Sentinel
server {
    listen 80;
    listen [::]:80;
    server_name sentinel.nexusprime.io security.nexusprime.io;

    location / {
        proxy_pass http://localhost:8006;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}

# Product 7: Shadow Seven Publisher
server {
    listen 80;
    listen [::]:80;
    server_name publisher.nexusprime.io publish.nexusprime.io;

    root /root/products/shadow-seven-publisher;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    location /api {
        proxy_pass http://localhost:8007;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}

# Integration Services
# CLONE HUB
server {
    listen 80;
    listen [::]:80;
    server_name clone.nexusprime.io;

    location / {
        proxy_pass http://localhost:9001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}

# Ecosystem API
server {
    listen 80;
    listen [::]:80;
    server_name api.nexusprime.io;

    location / {
        proxy_pass http://localhost:9002;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}

# Command Center (Admin Dashboard)
server {
    listen 80;
    listen [::]:80;
    server_name command.nexusprime.io admin.nexusprime.io;

    location / {
        proxy_pass http://localhost:9003;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}

# Docker Services
# Open-WebUI (AI Interface)
server {
    listen 80;
    listen [::]:80;
    server_name chat.nexusprime.io;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}

# n8n (Workflow Automation)
server {
    listen 80;
    listen [::]:80;
    server_name workflow.nexusprime.io n8n.nexusprime.io;

    location / {
        proxy_pass http://localhost:5678;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}

# Ollama API
server {
    listen 80;
    listen [::]:80;
    server_name ollama.nexusprime.io;

    location / {
        proxy_pass http://localhost:11434;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
